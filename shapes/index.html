<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shapes</title> 
    <script src="shape.js"></script>
    <style>
        #lienzo{
            width: 400px;
            height: 400px;
            border: 1px solid #333;
            position: relative;
            background-color: azure;
        }
        .shape{
            position: absolute;
        }
    </style>   
</head>
<body>
    <form id="createShape">
        <label>Figura:
            <select name="shapeType" id="shapeType">
                <option value="" disabled selected>Choose an option</option>
                <option value="Circle">Círculo</option>
                <option value="Square">Cuadrado</option>
                <option value="Triangle">Triangulo</option>
            </select>
        </label>
        <span id="inputs"></span>
        <input type="submit" name="crear" id="crear" value="Crear">
        <input type="button" id="clear" value="Borrar todas las figuras">

    </form>
    <div id="lienzo"></div>
    <script>
        const shapeType=document.getElementById('shapeType');
        const inputSpan=document.getElementById('inputs');

        function updateInputs(){
            //alert(shapeType.value);
            let html="";
            if(shapeType.value==='Circle'){
                html="Radio: <input name='r' type='number' min='1' required>";
            } else if(shapeType.value==='Square'){
                html="Side: <input name='s' type='number' min='1' required>";
            } else if(shapeType.value==='Triangle'){
                html="Base: <input name='b' type='number' min='1' required>";
                html+="Height: <input name='h' type='number' min='1' required>";
            }

            html+=" X: <input name='x' type='number' min='0' max='380' required>";
            html+=" Y: <input name='y' type='number' min='0' max='380' required>";
            html+=" Color: <input name='color' type='color' value='#ff0000' required>";

            inputSpan.innerHTML=html;

        }
        shapeType.addEventListener('change',updateInputs);

        //Escuchar al formulario createShape
        document.getElementById('createShape').addEventListener('submit',function(e){
            e.preventDefault();
            const data = new FormData(e.target);
            const type=data.get('shapeType');
            let shapeObj;
            if(type==='Circle'){
                shapeObj=new Circle(
                    Number(data.get('r')),
                    Number(data.get('x')),
                    Number(data.get('y')),
                    data.get('color')
                );
            } else if(type==='Square'){
                shapeObj= new Square(
                    Number(data.get('s')),
                    Number(data.get('x')),
                    Number(data.get('y')),
                    data.get('color')
                );
            } else if(type==='Triangle'){
                shapeObj= new Triangle(
                    Number(data.get('b')),
                    Number(data.get('h')),
                    Number(data.get('x')),
                    Number(data.get('y')),
                    data.get('color')
                );

            }
            //Llamar a la función que dibuja las figuras
            drawShape(shapeObj,type);

        });
        //Función para dinukar el objeto
        function drawShape(shapeObj, type){
            alert(JSON.stringify(shapeObj));
            const lienzo  = document.getElementById('lienzo');
            const div =document.createElement('div');
            div.className='shape';
            div.style.left=shapeObj.x+"px";
            div.style.top=shapeObj.y+"px";
            div.style.background=shapeObj.color;

            if(type==='Circle'){
                div.style.width=(shapeObj.r*2)+'px';
                div.style.height=(shapeObj.r*2)+'px';
                div.style.borderRadius='50%';
            } else if(type==='Square'){
                div.style.width=shapeObj.l+'px';
                div.style.height=shapeObj.l+'px';
            } else if(type==='Triangle'){
                div.style.width=0;
                div.style.height=0;
                div.style.borderLeft=(shapeObj.b/2)+"px solid transparent";
                div.style.borderRight=(shapeObj.b/2)+"px solid transparent";
                div.style.borderBottom=(shapeObj.h)+"px solid "+shapeObj.color;
                div.style.background="none";
            }

            lienzo.appendChild(div);

        }

    </script>
</body>
</html>